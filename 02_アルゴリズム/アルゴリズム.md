# アルゴリズム

## アルゴリズム（algorithm）とは

問題を解くための手法

## 計算量とオーダー記法

### 計算量（computational complexity）

実装しようとしているアルゴリズムを実際に実装しなくても、コンピュータ上での実行に要する時間を大雑把に見積もることができる

### オーダー記法

「アルゴリズム$A$の計算時間$T(N)$がおおむね$P(N)$に比例する」ということを

$$
T(N) = O(P(N))
$$

であると表し、アルゴリズム$A$の計算量は$O(P(N))$であるという

### 計算量の求め方

アルゴリズムの計算時間$T(N)$が

$$
T(N) = 3N^2 + 5N + 100
$$

と表されるとき、このアルゴリズムの計算量は$O(N^2)$となる

計算量の求め方の手順は、

1. $T(N) = 3N^2 + 5N + 100$に対して、最高次の項以外を落として$3N^2$とする
2. $3N^2$の係数を無視して、$N^2$とする

### 計算量を求めてみる

例１）正の整数$N$を受け取って、$N$以下の正の偶数をすべて出力するアルゴリズム

```C++
#include <iostream>
using namespace std;

int main() {
    int N;
    cin >> N;
    
    for (int i = 2; i <= N; i += 2) {
        count << i << endl;
    }
}
```

`for`文の反復回数は$N/2$回となるため、計算量は$O(N)$となる

例2）2次元平面上の$N$個の点のうち最も距離が近い2点間の距離を求めるアルゴリズム（最近点対問題）

```C++
#include <iostream>
#include <vector>
#include <cmath>
using namespace std;

double calc_dist(double x1, double y1, double x2, double y2) {
    return sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));
}

int main() {
    int N;
    cin >> N;
    
    vector<double> x(N), y(N);
    for (int i = 0; i < N; i++) cin >> x[i] >> y[i];
    
    // 求める値を十分大きな値で初期化しておく
    double minimum_dist = 10000000.0;
    
    for (int i = 0; i < N; i++) {
        for (int j = i + 1; j < N; j++) {
            double dist = calc_dist(x[i], y[i], x[j], y[j]);
            
            if (dist < minimum_dist) {
                minimum_dist = dist
            }
        }
    }
    
    cout << minimum_dist << endl;
}
```

`for`文の反復回数$T(N)$は

$$
T(N) = (N-1) + (N-2) + \cdots + 1 + 0 = \frac{1}{2} N^2 - \frac{1}{2} N
$$

よって、計算量は$O(N^2)$となる

### 計算量の使い方

ポイント

- 計算実行時間の制限はどの程度か
- 解きたい問題のサイズ（$N$）はどの程度か

仮に計算実行時間の制限が1秒だとする。一般的な家庭用PCの場合、1秒間に処理できる計算ステップ数は$10^9 = 1,000,000,000$回程度となる。


| $N$           | ${\rm log}N$ | $N{\rm log}N$ | $N^2$       | $N^3$     | $2^N$     | $N!$      |
|---------------|--------------|---------------|-------------|-----------|-----------|-----------|
|             5 |            2 |            12 |          25 |       130 |        30 |       120 |
|            10 |            3 |            33 |         100 |     1,000 |     1,024 | 3,628,800 |
|            20 |            4 |            86 |         400 |     8,000 | 1,048,576 |         - |
|           100 |            7 |           664 |      10,000 | 1,000,000 |         - |         - |
|         1,000 |           10 |         9,966 |   1,000,000 |         - |         - |         - |
|        10,000 |           13 |       132,877 | 100,000,000 |         - |         - |         - |
|       100,000 |           17 |     1,660,964 |           - |         - |         - |         - |
|     1,000,000 |           20 |    19,931,568 |           - |         - |         - |         - |
|    10,000,000 |           23 |   232,534,967 |           - |         - |         - |         - |
|   100,000,000 |           27 |             - |           - |         - |         - |         - |
| 1,000,000,000 |           30 |             - |           - |         - |         - |         - |

### 計算量に関する注意点

計算時間に関する計算量を**時間計算量**（time complexity）といい、実行時メモリ使用量を**領域計算量**（space complexity）という

また、最悪のケースにおける時間計算量を**最悪時間計算量**といい、平均的なケースにおける時間計算量を**平均時間計算量**という