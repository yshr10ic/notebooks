# その問題、数理モデルが解決します

## 本情報

- タイトル：その問題、数理モデルが解決します
- URL：[https://www.amazon.co.jp/dp/4860645685/](https://www.amazon.co.jp/dp/4860645685/)

<div>
    <img src="https://images-na.ssl-images-amazon.com/images/I/51uOTS58pgL._SX350_BO1,204,203,200_.jpg" width=300">
</div>

## 序：モデルとは何か？

- 傘を持っていくモデルについて考える
- 最初のモデル
    - 前提条件
        - 行動の選択肢は「傘を持っていく」 or 「傘を持っていかない」
        - 天気は「雨」 or 「晴れ」の2つのみ
        - 雨に濡れるコストは$-10$。傘を持っていくコストは$-2$（雨に濡れるコストの$-1/5$）
        - 雨の確率は$0.6$
    - 期待値
        - 傘を持っていく：$0.4 \times (-2) + 0.6 \times (-2) = -2$
        - 傘を持っていかない：$0.4 \times 0 + 0.6 \times (-10) = -6$
    - 分かったこと
        - 傘を持っていった方が良い
- 一般化モデル
    - 前提条件
        - 雨の確率は$p$、晴れの確率を$1-p$とする
    - 期待値
        - 傘を持っていく：$(1-p) \times (-2) + p \times (-2) = -2$
        - 傘を持っていかない：$(1-p) \times 0 + p \times (-10) = -10p$
    - 分かったこと
        - 雨の確率$p > 0.2$のときに、傘を持っていった方が良い
- さらに一般化モデル
    - 前提条件
        - 雨に濡れるコストを$-c$（$c>0$）
        - 傘を持っていくコストを$-ac$（$0<a<1$）
    - 期待値
        - 傘を持っていく：$(1-p) \times (-ac) + p \times (-ac) = -ac$
        - 傘を持っていかない：$(1-p) \times 0 + p \times (-c) = -pc$
    - 分かったこと
        - 雨の確率$p > a$のときに、傘を持っていった方が良い
- まとめ
    - 「モデル」とは、**現実世界を単純化・抽象化したもの**であり、明確な仮定からなる
    - モデルの目的は、**単純な原理から現実を説明すること**

## 第１章：隠された事実を知る方法

- 問題
    - 学生の喫煙率を調べたい
    - なお、校内は全面禁煙である
- 手順
    - コインを投げる（質問者は結果を見ない）
    - コインが表の場合、正直に答える。裏の場合、「はい」を答える
- 考え方
    - 対象者を集団に分ける
        - A：コインで表が出た人たち
        - B：コインで裏が出た人たち
        - C：Aの中で煙草を吸った人たち
        - D：Bの中で煙草を吸った人たち
        <div style="background-color:#ffffff;" align="center"><img src="./img/chap1_01.png" width=300"></div>

    - 数値例
        - 調査対象者数：1000人
            - $| A \cup B | = 1000$
        - 理想的なコインを用いた場合、コインが表となる確率は50%
            - $| A | = 500$, $| B | = 500$
        - アンケートに「はい」と答えた人数：600人
            - $| B \cup C | = 600$
        <div style="background-color:#ffffff;" align="center"><img src="./img/chap1_02.png" width=300"></div>

        - $B$と$C$は互いに背反であるため
            - $| C | = | B \cup C | - | B | = 100$
        - グループ$A$の中での喫煙率は$\frac{| C |}{| A |} = 0.2$
        - 全体の喫煙率も20%となる
- まとめ
    - 正直な回答に抵抗のある質問（喫煙、飲酒、犯罪など）から得たデータには、バイアスが存在する可能性がある
    - 回答のランダム化により、バイアスが取り除かれ、正直な回答に近い比率で推定できる

## 第２章：卒業までに彼氏ができる確率

- 前提条件
    - 確率$p$で好きになる（$X = 1$）
    - 確率$1-p$で好きにならない（$X = 0$）
        - 上記のとき、確率変数$X$は**ベルヌーイ分布にしたがう**という
    - $n$人と出会い、$x$人から好かれる確率を計算したい
    - 状態は「好きになる」「好きにならない」の2つのみ
    - すべての男性は同じ確率$p$であなたを好きになる
- $n = 3$の場合
    - 確率変数$X_1$が男性1を表す
        - $X_1 = 1$：男性1があなたを好きになる
        - $X_1 = 0$：男性1があなたを好きにならない
        - 確率で表すと
            - $P(X_1 = 1) = p$
            - $P(X_1 = 0) = 1 - p$
    - $X_2$、$X_3$についても同様

| 事象   | 0人に好かれる | 1人に好かれる   | 2人に好かれる | 3人に好かれる |
| ------ | ------------- | --------------- | ------------- | ------------- |
| 実現値 | $X = 0$       | X = 1           | X = 2         | X = 3         |
| 確率   | $(1 - p) ^ 3$ | $3p(1 - p) ^ 2$ | $3p^2(1 - p)$ | $3p^3$        |

- $n$人の場合
    - 誰からも好かれない確率
        - $(1 - p)^n$
        - $n = 50$、$p = 0.05$の場合、$(1 - 0.05)^{50} = 0.95^{50} \approx 0.076$
        - だいたい8%
        - 逆に1人以上から好かれる確率は92%
    - コンビネーション
        - $n$個の中から$x$個を取り出す組み合わせの総数は
        - ${}_n C _x = \binom{n}{x} = \frac{n!}{x!(n - x)!}$
        - $n = 3$、$x = 1$の場合
            - ${}_3 C _1 = \frac{3!}{1!(3 - 1)!} = \frac{3 \times 2 \times 1}{1 \times 2 \times 1} = 3$
    - $n$人のうち$x$人から好かれる組み合わせ
        - ${}_n C _x$
    - $n$人のうち$x$人から好かれる確率
        - $p^x (1-p)^{n - x}$
    - 最終的な確率
        - ${}_n C _x p^x (1-p)^{n - x}$
- まとめ
    - 簡単な具体例から始めて、徐々に一般化する（$n = 3$から始める）
        - 計算が簡単
        - モデルの構造を把握しやすい
    - はじめは単純なモデルを作り、少しずつ複雑な（現実に即した）モデルにする（好きになる確率を男性ごとに変えるなど）
        - 最初から複雑にするとモデルが完成しない可能性がある
